# 自托管消息

自托管消息功能将 Message Nest 作为消息接收平台，用户登录站点查看消息。

## 功能概述

**核心定位：** 将 Message Nest 站点作为消息接收和展示平台，而不是推送到外部渠道。

**主要功能：**
- ✅ 站点作为消息接收平台
- ✅ 用户登录后台查看消息
- ✅ 搜索消息
- ✅ 查看消息详情

**与其他渠道的区别：**
- **邮件/钉钉/企业微信** - 推送到外部平台，用户在对应平台查看
- **自托管消息** - 存储在 Message Nest 站点，用户登录站点查看

## 配置自托管消息渠道

### 创建渠道

1. 登录管理后台
2. 进入"推送渠道"页面
3. 点击"新建渠道"
4. 选择渠道类型："自托管消息"
5. 填写渠道名称和描述
6. 保存渠道

### 配置参数

| 参数 | 说明 | 必填 |
|------|------|------|
| 渠道名称 | 自定义渠道名称 | 是 |
| 渠道描述 | 渠道用途说明 | 否 |

## 使用自托管消息

### 方式一：通过任务发送

1. 创建发送任务
2. 添加自托管消息渠道实例
3. 通过 V1 API 发送消息

**API 示例：**

```bash
curl -X POST http://your-domain/api/v1/message/send \
  -H "Content-Type: application/json" \
  -d '{
    "token": "your_task_token",
    "title": "系统通知",
    "text": "您有一条新消息"
  }'
```

### 方式二：通过模板发送（推荐）

1. 创建消息模板
2. 为模板添加自托管消息实例
3. 通过 V2 API 发送消息

**API 示例：**

```bash
curl -X POST http://your-domain/api/v2/message/send \
  -H "Content-Type: application/json" \
  -d '{
    "token": "your_template_token",
    "title": "订单通知",
    "placeholders": {
      "order_id": "20241206001"
    }
  }'
```

## 查看消息

### 消息列表

1. 登录管理后台
2. 进入"托管消息"页面
3. 查看消息列表

**列表信息：**

| 列 | 说明 |
|----|------|
| ID | 消息 ID |
| 消息标题 | 消息标题（可点击查看完整内容） |
| 消息内容 | 消息内容（可点击查看完整内容） |
| 创建时间 | 消息接收时间 |
| 详情 | 查看按钮 |

### 搜索消息

在消息列表页面的搜索框中输入关键词，可以搜索消息标题和内容。

### 查看详情

点击消息行的"查看"按钮，在侧边栏中查看消息完整信息：

- 标题
- 内容
- URL（如果有）
- 创建时间
- 修改时间

## 使用场景

### 场景 1：站内消息中心

将 Message Nest 作为网站/应用的消息中心，用户登录站点查看消息。

**适用于：**
- 系统公告
- 用户通知
- 订单状态更新

### 场景 2：内部通知平台

团队内部的工作通知集中管理，成员登录站点查看。

**适用于：**
- 审批通知
- 任务分配
- 会议提醒

### 场景 3：消息归档

所有发送的消息都存储在站点，便于查询和追溯。

**适用于：**
- 消息记录
- 审计追溯
- 历史查询

## 注意事项

::: warning 重要提示
1. **存储空间** - 消息不会自动清理，注意定期手动清理
2. **查看方式** - 用户需要登录 Message Nest 站点才能查看消息
3. **消息格式** - 支持 Text、HTML、Markdown 格式
4. **权限控制** - 确保只有授权用户可以登录查看
:::

## 下一步

- 查看 [渠道配置](/guide/channels) 了解如何配置自托管消息渠道
- 查看 [消息模板](/guide/template) 了解如何创建模板
- 查看 [V2 API 文档](/api/v2) 了解如何发送消息
