# Message Nest ğŸ•Šï¸

Message Nest æ˜¯ä¸€ä¸ªçµæ´»è€Œå¼ºå¤§çš„æ¶ˆæ¯æ¨é€æ•´åˆå¹³å°ï¼Œæ—¨åœ¨ç®€åŒ–å¹¶è‡ªå®šä¹‰å¤šç§æ¶ˆæ¯é€šçŸ¥æ–¹å¼ã€‚

é¡¹ç›®åå«ä¿¡æ¯å·¢ï¼Œæ„æ€æ˜¯ä¸€ä¸ªæ‹¥æœ‰å„ç§æ¸ é“ä¿¡æ¯æ–¹å¼çš„é›†åˆç«™ç‚¹ã€‚

å¦‚æœä½ æœ‰å¾ˆå¤šæ¶ˆæ¯æ¨é€æ–¹å¼ï¼Œæ¯æ¬¡éƒ½éœ€è¦è°ƒç”¨å„ç§æ¥å£å»å‘é€æ¶ˆæ¯åˆ°å„ä¸ªæ¸ é“ï¼Œæˆ–è€…ä¸åŒçš„é¡¹ç›®ä½ éƒ½éœ€è¦å¤åˆ¶åŒæ ·çš„å‘æ¶ˆæ¯ä»£ç ï¼Œè¿™ä¸ªé¡¹ç›®å¯ä»¥å¸®ä½ ç®¡ç†å„ç§æ¶ˆæ¯æ–¹å¼ï¼Œå¹¶æä¾›ç»Ÿä¸€çš„å‘é€apiæ¥å…¥ã€‚ä½ å¯ä»¥è‡ªç”±ç»„åˆå„ç§æ¶ˆæ¯æ¸ é“ï¼Œä¸€ä¸ªapiæ¨é€åˆ°å„ç§æ¸ é“ï¼Œå¸®ä½ çœå»æ¥å…¥çš„ç¹çæ­¥éª¤ã€‚

æ¼”ç¤ºç«™ç‚¹(æ¼”ç¤ºç«™ç‚¹çš„æœåŠ¡å™¨æ¯”è¾ƒçƒ‚ï¼Œè§è°…) [demo](https://demo-message-nest.engigu.cn/)

## ç‰¹è‰² âœ¨

- ğŸ”„ **æ•´åˆæ€§ï¼š** æä¾›äº†å¤šç§æ¶ˆæ¯æ¨é€æ–¹å¼ï¼ŒåŒ…æ‹¬é‚®ä»¶ã€é’‰é’‰ã€ä¼ä¸šå¾®ä¿¡ç­‰ï¼Œæ–¹ä¾¿ä½ é›†ä¸­ç®¡ç†å’Œå®šåˆ¶é€šçŸ¥ã€‚
- ğŸ¨ **è‡ªå®šä¹‰æ€§ï¼š** å¯ä»¥æ ¹æ®éœ€æ±‚å®šåˆ¶æ¶ˆæ¯æ¨é€ç­–ç•¥ï¼Œæ»¡è¶³ä¸åŒåœºæ™¯çš„ä¸ªæ€§åŒ–éœ€æ±‚ã€‚
- ğŸ›  **å¼€æ”¾æ€§ï¼š** æ˜“äºæ‰©å±•å’Œé›†æˆæ–°çš„æ¶ˆæ¯é€šçŸ¥æœåŠ¡ï¼Œä»¥é€‚åº”æœªæ¥çš„å˜åŒ–ã€‚


## è¿›åº¦ ğŸ”¨

é¡¹ç›®è¿˜åœ¨ä¸æ–­æ›´æ–°ä¸­ï¼Œæ¬¢è¿å¤§å®¶æå‡ºå„ç§å»ºè®®ã€‚

å…³äºæ—¥å¿—ï¼Œè€ƒè™‘åˆ°ç›®å‰å¤šæ•°æœåŠ¡ä»¥æ”¶é›†æ§åˆ¶å°è¾“å‡ºä¸ºä¸»ï¼Œæš‚æ—¶ä¸æ”¯æŒå†™å‡ºæ—¥å¿—æ–‡ä»¶ã€‚

2024.01.24
- [x] æ”¯æŒæ•°æ®ç»Ÿè®¡å±•ç¤º

2024.01.20
- [x] æ·»åŠ æ—¥å¿—æŸ¥çœ‹è‡ªåŠ¨åˆ·æ–°

2024.01.07
- [x] æ”¯æŒç«™ç‚¹ä¿¡æ¯è‡ªå®šä¹‰

2024.01.03
- [x] æ”¯æŒä¼ä¸šå¾®ä¿¡


- [x] å•åº”ç”¨æ‰“åŒ…,ç›´æ¥è¿è¡Œ,ä¸ç”¨éƒ¨ç½²å‰ç«¯é¡µé¢
- [x] æ”¯æŒé‚®ä»¶å‘é€
- [x] ç”¨æˆ·å¯†ç è®¾ç½®
- [x] æ”¯æŒç”¨æˆ·å®šæ—¶ä»»åŠ¡æ¸…ç†ï¼Œæ›´æ–°å®šæ—¶æ—¶é—´
- [x] æŸ¥çœ‹å®šæ—¶æ¸…ç†æ—¥å¿—
- [x] å•åº”ç”¨çš„htmlæµè§ˆå™¨è‡ªåŠ¨ç¼“å­˜
- [x] ginçš„æ—¥å¿—ä½¿ç”¨logrus
- [x] æ”¯æŒå¼‚æ­¥å‘é€
- [x] æ”¯æŒé‚®ä»¶å‘é€
- [x] æ”¯æŒé’‰é’‰
- [x] æ”¯æŒè‡ªå®šä¹‰çš„webhookæ¶ˆæ¯å‘é€
- [x] ä¼ä¸šå¾®ä¿¡
- [ ] ....

## é¡¹ç›®æ¥ç”± ğŸ’¡
è‡ªå·±å¸¸å¸¸å†™ä¸€äº›è„šæœ¬éœ€è¦æ¶ˆæ¯æ¨é€ï¼Œç»å¸¸éœ€è¦æ¥å…¥ä¸åŒçš„æ¶ˆæ¯å‘é€ï¼Œå¾ˆä¸æ–¹ä¾¿ï¼Œäºæ˜¯å°±æœ‰äº†è¿™ä¸ªé¡¹ç›®ã€‚

## æ•ˆæœå›¾ ğŸ“º
![image](https://raw.githubusercontent.com/engigu/resources/images/2024/01/26/593a06ac4d1db666acb8a9fb8719e734.gif)

## ä½¿ç”¨æ–¹æ³• ğŸš€

<details>
  <summary>1. ç›´æ¥è¿è¡Œæœ€æ–°çš„releaseæ‰“åŒ…çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆæ¨èï¼Œä¸ç”¨éƒ¨ç½²å‰ç«¯é¡µé¢ï¼‰</summary>

1. ä¸‹è½½æœ€æ–°çš„ç³»ç»Ÿç‰ˆæœ¬å¯¹åº”çš„releaseï¼Œ è§£å‹
2. æ–°å»ºä¸€ä¸ªæ•°æ®åº“
3. é‡å‘½åconf/app.example.iniä¸ºconf/app.ini
4. ä¿®æ”¹app.iniå¯¹åº”çš„é…ç½®
5. å°†é…ç½®ä¸­`EmbedHtml = disable`, è¿›è¡Œæ³¨é‡Šï¼Œä»¥å•åº”ç”¨æ–¹å¼è¿è¡Œï¼Œå®Œæ•´é…ç½®å‚è€ƒå¦‚ä¸‹ï¼š
```ini
[app]
JwtSecret = message-nest
LogLevel = INFO

; ç¬¬ä¸€æ¬¡è¿è¡ŒåŠ¡å¿…æ‰“å¼€ï¼Œåˆå§‹åŒ–æ•°æ®
InitData = enable

[server]
RunMode = release
HttpPort = 8000
ReadTimeout = 60
WriteTimeout = 60
; æ³¨é‡ŠEmbedHtmlï¼Œå¯ç”¨å•åº”ç”¨æ¨¡å¼
; EmbedHtml = disable

[database]
; å…³é—­SQLæ‰“å°
; SqlDebug = enable

Type = mysql
User = root
Password = Aa123456
Host = vm.server
Port = 3308
Name = yourDbName
TablePrefix = message_

```
6. å¯åŠ¨é¡¹ç›®ä¼šè‡ªåŠ¨åˆ›å»ºè¡¨å’Œè´¦å· 
```shell
# ç¬¬ä¸€æ¬¡è¿è¡Œå°†app.iniä¸­çš„app.InitDataè®¾ç½®ä¸ºenableï¼Œä¼šè‡ªåŠ¨è¿›è¡Œè¡¨æ•°æ®çš„åˆå§‹åŒ–
# åç»­ä¸éœ€è¦å¼€å¯è¿™ä¸ªé…ç½®
# INFOæ—¥å¿—çº§åˆ«å¯åŠ¨å›å‡ºç°å¦‚ä¸‹æ—¥å¿—

[2024-01-13 13:40:09.075]  INFO [migrate.go:70 Setup] [Init Data]: Migrate table: message_auth
[2024-01-13 13:40:11.778]  INFO [migrate.go:70 Setup] [Init Data]: Migrate table: message_send_tasks
[2024-01-13 13:40:16.518]  INFO [migrate.go:70 Setup] [Init Data]: Migrate table: message_send_ways
[2024-01-13 13:40:23.300]  INFO [migrate.go:70 Setup] [Init Data]: Migrate table: message_send_tasks_logs
[2024-01-13 13:40:28.715]  INFO [migrate.go:70 Setup] [Init Data]: Migrate table: message_send_tasks_ins
[2024-01-13 13:40:39.538]  INFO [migrate.go:70 Setup] [Init Data]: Migrate table: message_settings
[2024-01-13 13:40:46.299]  INFO [migrate.go:74 Setup] [Init Data]: Init Account data...
[2024-01-13 13:40:46.751]  INFO [migrate.go:77 Setup] [Init Data]: All table data init done.

```
7. å¯åŠ¨é¡¹ç›®ï¼Œè®¿é—®8000ç«¯å£ï¼Œåˆå§‹è´¦å·ä¸ºadminï¼Œå¯†ç ä¸º123456

</details>


<details>
  <summary>2. å‰åç«¯åˆ†ç¦»éƒ¨ç½²ï¼ˆå¾…æ›´æ–°ï¼‰</summary>
</details>


[//]: # (1. å‰ç«¯é¡¹ç›®æ„å»º)

[//]: # (```shell)

[//]: # (cd web && npm i && npm run build)

[//]: # (```)

[//]: # (2. é…ç½®é…ç½®æ–‡ä»¶ï¼Œå‚è€ƒä¸Šé¢ï¼Œéœ€è¦æ³¨æ„å°†é…ç½®ä¸­`EmbedHtml = disable`å–æ¶ˆæ³¨é‡Š)

[//]: # (3. å¯åŠ¨goæœåŠ¡)

[//]: # (```shell)

[//]: # (go mod tidy)

[//]: # (CGO_ENABLED=0 go build -o Message-Nest)

[//]: # (./Message-Nest)

[//]: # (```)

[//]: # (4. é…ç½®Nginxï¼Œå°†é™æ€æ–‡ä»¶)

[//]: # (5. é…ç½®Nginxï¼Œå°†åç«¯æ¥å£è½¬å‘)

<details>
  <summary> 3. å¼€å‘è°ƒè¯•è¿è¡Œ</summary>

1. é‡å‘½åconf/app.example.iniä¸ºconf/app.iniï¼Œ å…³é”®é…ç½®å¦‚ä¸‹
```ini
[app]
JwtSecret = message-nest
LogLevel = INFO

; ç¬¬ä¸€æ¬¡è¿è¡ŒåŠ¡å¿…æ‰“å¼€ï¼Œåˆå§‹åŒ–æ•°æ®
InitData = enable

[server]
; RunModeåŠ¡å¿…è®¾ç½®æˆdebugï¼Œä¼šè‡ªåŠ¨æ·»åŠ è·¨åŸŸ
RunMode = debug
HttpPort = 8000
ReadTimeout = 60
WriteTimeout = 60
; å–æ¶ˆEmbedHtmlçš„æ³¨é‡Šï¼ˆå¯ç”¨å‰åç«¯åˆ†ç¦»ï¼‰ï¼Œç„¶ååˆ°webç›®å½•ä¸‹é¢ï¼Œnpm run devå¯åŠ¨å‰ç«¯é¡µé¢
EmbedHtml = disable

[database]
; å¼€å¯SQLæ‰“å°
SqlDebug = enable

Type = mysql
User = root
Password = Aa123456
Host = vm.server
Port = 3308
Name = yourDbName
TablePrefix = message_

```
2. è¿è¡Œmain.goï¼ŒæœåŠ¡å¯åŠ¨åä¼šè¿è¡Œåœ¨8000ç«¯å£
```shell
go mod tidy
go run main.go
```
3. å¯åŠ¨å‰ç«¯é¡µé¢ï¼Œé¡µé¢å¯åŠ¨åä¼šæç¤ºè®¿é—®urlï¼Œä¸€èˆ¬æ˜¯`http://127.0.0.1:5173`
```shell
cd web
npm i
nom run dev
```
4. è®¿é—®`http://127.0.0.1:5173`ï¼Œè¿›è¡Œè°ƒè¯•å¼€å‘ï¼Œæ¥å£ä¼šè‡ªåŠ¨è½¬å‘åˆ°goæœåŠ¡`http://localhost:8000`

</details>


#### å…³äºEmbedHtmlé…ç½®çš„è¯´æ˜

>  è¿™ä¸ªé…ç½®å¯ä»¥ç†è§£ä¸ºå•åº”ç”¨æ¨¡å¼ï¼ˆæˆ–è€…å‰åç«¯åˆ†ç¦»ï¼‰çš„å¼€å…³
>  1. å–æ¶ˆè¿™ä¸ªé…ç½®çš„æ³¨é‡Šï¼Œè¡¨ç¤ºå‰åç«¯åˆ†ç¦»ï¼Œè¡¨ç¤ºgoæœåŠ¡å¯åŠ¨çš„æ—¶å€™åªä¼šæœ‰apiæœåŠ¡ï¼Œéœ€è¦åˆ°webç›®å½•ä¸‹ï¼Œnpm run devå¯åŠ¨å‰ç«¯é¡¹ç›®ã€‚ç„¶åè®¿é—®å‰ç«¯é¡¹ç›®æç¤ºçš„ç«¯å£æœåŠ¡ï¼Œä¸€èˆ¬æ˜¯127.0.0.1:5173ã€‚
    æˆ–è€…ä½¿ç”¨npm run buildï¼Œç”¨Nginxéƒ¨ç½²å‰ç«¯ã€‚
> 
> 
> 2. æ³¨é‡Šè¿™ä¸ªé…ç½®ï¼Œè¡¨ç¤ºå•åº”ç”¨ï¼Œå¯åŠ¨goæœåŠ¡ï¼Œä¼šæŠŠweb/distç›®å½•ä¸‹æ–‡ä»¶ä½œä¸ºå‰ç«¯é™æ€èµ„æºã€‚ 
    å¦‚æœç›®å½•ä¸‹æ²¡æœ‰é™æ€èµ„æºæ–‡ä»¶ï¼Œéœ€è¦åˆ°webç›®å½•ä¸‹ï¼Œnpm run buildæ„å»ºç”Ÿæˆã€‚
>
> ä¸¤ç§æ–¹å¼å„æœ‰ä¼˜ç¼ºç‚¹ï¼Œç»¼åˆè€ƒè™‘ä¸‹æ¥ï¼Œæ¨èç›´æ¥ä½¿ç”¨releaseçš„æ‰“åŒ…æ‰§è¡Œæ–‡ä»¶ï¼Œå…¶ä¸­å·²ç»å†…ç½®äº†é¡µé¢é™æ€èµ„æºï¼Œåªç”¨è¿è¡Œä¸€ä¸ªæœåŠ¡ã€‚


## å®Œæ•´é…ç½®è¯´æ˜ âš™ï¸

```ini
[app]
JwtSecret = message-nest
; æš‚æ—¶æ— ç”¨
RuntimeRootPath = runtime/
LogLevel = INFO

; init table data, first run set enable
; é¦–æ¬¡è¿è¡Œæ‰“å¼€è¿™ä¸ªï¼Œä¼šè‡ªåŠ¨åˆå§‹åŒ–è¡¨å’Œæ•°æ®
; é¡¹ç›®å‡çº§éœ€è¦æ‰“å¼€è¿™ä¸ªè¿›è¡Œæ£€æµ‹æ–°å¢è¡¨å­—æ®µåˆ›å»º
InitData = enable

[server]
; debug or release
RunMode = release
HttpPort = 8000
ReadTimeout = 60
WriteTimeout = 60
; use embed html static file
; æ˜¯å¦ä½¿ç”¨embedæ‰“åŒ…çš„é™æ€èµ„æº
; å¦‚æœè¿è¡Œreleaseæ‰“åŒ…åçš„åº”ç”¨ï¼Œè¯·æ³¨é‡Šè¿™ä¸ªè®¾ç½®ã€‚
; å¦‚æœå–æ¶ˆè¿™ä¸ªæ³¨é‡Šï¼Œåªä¼šå•ç‹¬è¿è¡ŒapiæœåŠ¡ï¼Œå‰ç«¯é¡µé¢éœ€è¦åˆ°webç›®å½•æ‰‹åŠ¨npm run dev, è¿è¡Œå‰ç«¯æœåŠ¡
; EmbedHtml = disable   

[database]
Type = mysql
User = root
Password = password
Host = 123.1.1.1
Name = db_name
Port = 3306
; è¡¨å‰ç¼€
TablePrefix = message_
; æ˜¯å¦æ‰“å¼€sqlæ‰“å°
; SqlDebug = enable
```


## è´¡çŒ® ğŸ¤
æ¬¢è¿é€šè¿‡æäº¤é—®é¢˜å’Œæå‡ºæ”¹è¿›å»ºè®®ã€‚

## è‡´è°¢ ğŸ™
è¯¥é¡¹ç›®æ±²å–äº†[go-gin-example](https://github.com/eddycjy/go-gin-example)é¡¹ç›®çš„çµæ„Ÿï¼Œå±•ç¤ºäº† Go å’Œ Gin åœ¨å®é™…åº”ç”¨ä¸­çš„å¼ºå¤§å’Œå¤šæ‰å¤šè‰ºã€‚

## è®¸å¯è¯ ğŸ“
[LICENSE](LICENSE)

